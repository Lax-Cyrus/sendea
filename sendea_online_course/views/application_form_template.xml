<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <template id="sendea_online_course_application_form" name="Online Course Application">
        <t t-call="portal.portal_layout">
            <t t-set="breadcrumbs_searchbar" t-value="True"/>
            <t t-call="portal.portal_searchbar">
                <t t-set="title">Online Course Application</t>
            </t>
            <div style="padding:15px;background-color: white !important;">
                <span class="section_title" style="background-color: white !important">Online Course Application</span>
            </div>
            <div id="wrap" class="oe_structure oe_empty">
                <div class="container">
                    <div class="col-md-8">
                        <form role="form" action="/sendea/submit-application" method="post"
                                enctype="multipart/form-data">
                            <div class="form-group col-md-12">
                                    <div t-if="error" class="alert alert-danger" role="alert">
                                        <t t-raw="error"/>
                                    </div>
                                </div>
                                <input type="hidden" name="csrf_token" t-att-value="request.csrf_token()"/>

                                
                                <div class="form first">
                                    <div class="details personal">
                                <p><b>PERSONAL DETAILS</b></p>
                                <div class="row">
                                    <div class="form-group col-md-6">
                                        <label for="name1">Name *</label>
                                        <input type="text" id="name1" name="name" class="form-control" required="required"/>

                                        <label for="email1">Email *</label>
                                        <input type="email" id="email1" name="email" class="form-control" required="required"/>

                                        <label for="date_birth1">Date of Birth *</label>
                                        <input type="date" id="date_birth1" name="date_birth" class="form-control" required="required"/>
                                    </div>
                                    <div class="form-group col-md-6">
                                        <label for="gender1">Gender *</label>
                                        <select name="gender" id="gender1" class="form-control" required="required">
                                            <option value="">Select</option>
                                            <option value="male">Male</option>
                                            <option value="female">Female</option>                                                                
                                        </select>

                                        <label for="contact_number1">Contact *</label>
                                        <input type="text" id="contact_number1" name="contact_number" class="form-control" required="required"/>

                                        <label for="nin_number1">NIN Number *</label>
                                        <input type="text" id="nin_number1" name="nin_number" class="form-control" required="required"/>                                                                        
                                    </div>
                                    <p><b>PRESENT ADDRESS DETAILS</b></p>

                                    <div class="form-group col-md-6">                                
                                        <label for="nationality">Nationality *</label>
                                        <select id="nationality" name="nationality" class="form-control" required="required">
                                            <t t-foreach="nationalities" t-as="country">
                                                <option value=""/>
                                                <option t-att-value="country.id"><t t-esc="country.name"/></option>
                                            </t>
                                        </select>

                                        <label for="region">Region *</label>
                                        <select id="region" name="region" class="form-control" required="required">
                                            <option value="">Select a region</option>
                                            <t t-foreach="region" t-as="regions">
                                                <option t-att-value="regions.id"><t t-esc="regions.name"/></option>
                                            </t>
                                        </select>

                                        <label for="district">District *</label>
                                        <select id="district" name="district" class="form-control" required="required">
                                            <option value="">Select a district</option>
                                            <t t-foreach="district" t-as="dist">
                                                <option t-att-value="dist.id" t-att-data-region="dist.region_id.id">
                                                    <t t-esc="dist.name"/>
                                                </option>
                                            </t>
                                        </select>
                                    </div>
                                    <div class="form-group col-md-6">
                                        <label for="sub_county_label">Sub County *</label>
                                        <select id="sub_county" name="sub_county" class="form-control" required="required">
                                            <option value="">Select a sub county</option>
                                            <t t-foreach="sub_county" t-as="sub_countys">
                                                <option t-att-value="sub_countys.id" t-att-data-district="sub_countys.district_id.id">
                                                <t t-esc="sub_countys.name"/></option>
                                            </t>
                                        </select>

                                        <label for="parish_label">Parish *</label>
                                        <select id="parish" name="parish" class="form-control" required="required">
                                            <option value="">Select a parish</option>
                                            <t t-foreach="parish" t-as="parishes">
                                                <option t-att-value="parishes.id" t-att-data-sub_county="parishes.sub_county_id.id">
                                                <t t-esc="parishes.name"/></option>
                                            </t>
                                        </select>

                                        <label for="village_label">Village </label>
                                        <input type="text" id="village_label" name="village_label" class="form-control" required="required"/>

                                        <!-- <select id="village" name="village" class="form-control">
                                            <option value="">Select a village</option>
                                            <t t-foreach="village" t-as="villages">
                                                <option t-att-value="villages.id" t-att-data-parish="villages.parish_id.id">
                                                <t t-esc="villages.name"/></option>
                                            </t>
                                        </select>                                   -->
                                    
                                    
                                    </div>
                                </div>
                                <button type="button" class="nextBtn btn btn-primary col-md-12" id="next_button_1">Next</button>
                            </div>
                            </div>
                            <br/><br/>

                            <div class="form second">
                                <div class="details kin">
                                <p><b>NEXT OF KIN DETAILS</b></p>
                                <div class="row">
                                    <div class="form-group col-md-6">
                                        <label for="name_next_kin_label">Name of Next of Kin *</label>
                                        <input type="text" id="name_next_kin" name="name_next_kin" class="form-control" required="required"/>

                                        <label for="address_next_kin_label">Address of Next of Kin *</label>
                                        <input type="text" id="address_next_kin" name="address_next_kin" class="form-control" required="required"/>                                       
                                    
                                    </div>

                                    <div class="form-group col-md-6">
                                        <label for="email_next_kin_label">Email of Next of Kin</label>
                                        <input type="email" id="email_next_kin" name="email_next_kin" class="form-control"/>                                        

                                        <label for="tel_next_kin_label">Phone Number *</label>
                                        <input type="text" id="tel_next_kin" name="tel_next_kin" class="form-control" required="required"/>
                                    
                                    
                                    </div>
                                    <p><b>REASON FOR APPLYING</b></p>

                                    <div class="form-group col-md-6">
                                        <label for="reason_interested_area_label">Please briefly describe why you are interested in Training  at Sendea Academy*</label>
                                        <input type="text" id="reason_interested_area" name="reason_interested_area" class="form-control" required="required"/>

                                        <label for="expectation_interested_area_label">Expectation From the Training</label>
                                        <input type="text" id="expectation_interested_area" name="expectation_interested_area" class="form-control"/>

                                        <label for="number_installations_label">Number of Installations</label>
                                        <input type="text" id="number_installations" name="number_installations" placeholder="Use 1,2,3,....." class="form-control"/>
                                        
                                    
                                    </div>

                                    <div class="form-group col-md-6">
                                        <label for="place_installation_label">Place of Installations</label>
                                        <input type="text" id="place_installation" name="place_installation" class="form-control"/>

                                        <label for="type_installations_label">Type / Size of Systems installed</label>
                                        <input type="text" id="type_installations" name="type_installations" class="form-control"/>

                                        <label for="email">Level of Knowledge in PV Solar Systems Design *</label>
                                        <select name="level_knowledge" id="level_knowledge" class="form-control" required="required">
                                                <option value=""/>
                                                <option value="zore">Not at all</option>
                                                <option value="basic">Basic</option>
                                                <option value="intermediate">Intermediate</option>                                                                
                                            </select>
                                        
                                    
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-6 text-left">
                                        <button type="button" class="backBtn btn btn-primary col-md-8" id="previous_button_2">Previous</button>
                                    </div>
                                    <div class="col-md-6 text-right">
                                        <button type="button" class="nextBtn btn btn-primary col-md-8" id="next_button_3">Next</button>
                                    </div>
                                </div>
                                
                            </div>
                            </div>
                            <br/><br/>

                            

                            <div class="form three">
                                <div class="details education">
                                <p><b>INSTITUTIONAL / VOCATIONAL EDUCATIONAL BACKGROUND</b></p>
                                <div id="instituteFields">
                                    
                                    <div class="row institute-group">
                                        <div class="form-group col-md-4">
                                            <label for="institute1">Name of Institute *</label>
                                            <input type="text" id="institute1" name="name_institute[]" class="form-control"/>
                                        </div>
                                        <div class="form-group col-md-4">
                                            <label for="year_training1">Year *</label>
                                            <input type="text" id="year_training1" name="year_training[]" class="form-control"/>
                                        </div>
                                        <div class="form-group col-md-4">
                                            <label for="qualification1">Qualification *</label>
                                            <input type="text" id="qualification1" name="qualification[]" class="form-control"/>
                                        </div>
                                        <div class="form-group col-md-4">
                                            <button type="button" id="addInstituteButton" class="btn btn-primary mt-3">Add Institute</button>
                                        </div>
                                        
                                    </div>
                                </div>

                                
                                <p><b>EMPLOYMENT RECORD (if any)</b></p>
                                <div id="employmentFields">
                                    <!-- Initial Institute Fields -->
                                    <div class="row employment-group">
                                        <div class="form-group col-md-4">
                                            <label for="name_employer1">Employer Name</label>
                                            <input type="text" id="name_employer1" name="employer_name[]" class="form-control"/>
                                        </div>
                                        <div class="form-group col-md-4">
                                            <label for="starting_year1">Starting Year</label>
                                            <input type="text" id="starting_year1" name="starting_year[]" class="form-control"/>
                                        </div>
                                        <div class="form-group col-md-4">
                                            <label for="ending_year1">Ending Year</label>
                                            <input type="text" id="ending_year1" name="ending_year[]" class="form-control"/>
                                        </div>
                                        <div class="form-group col-md-4">
                                            <button type="button" id="addEmploymentButton" class="btn btn-primary mt-3">Add Employment</button>
                                        </div>
                                        
                                    </div>
                                </div>
                                <p><b>OTHER INFORMATION</b></p>

                                    <div class="form-group col-md-12">
                                        <label for="amount_earned_label">Amount Earned</label>
                                        <input type="text" id="amount_earned" name="amount_earned" class="form-control"/>

                                    </div>
                                    <div class="form-group col-md-12">
                                        <label for="earning_types_label">Earning Type</label>
                                        <select name="earning_types" id="earning_types" class="form-control">
                                                <option value="">Select</option>
                                                <option value="month">Monthly</option>
                                                <option value="seasonal">Seasonal</option>
                                            </select>                                   
                                    </div>
                                    <div class="form-group col-md-12">
                                        <label for="declaration">Declaration By the Applicant *</label>
                                        <input type="text" id="declaration" name="declaration" class="form-control"/>

                                        <label for="recommendation_attachment_label">Recommendation by Employer if Any or LC1 Chairman *</label>
                                        <input type="file" id="recommendation_attachment" name="recommendation_attachment" class="form-control"/> 
                                                                          
                                    
                                   
                                    
                                        <label id="display_image_label">Upload your Passport Photo (To appear on Membership ID)*</label><br/> 
                                        <input id="passportPhotoInput" type="file" name="image_1920" accept="image/png,image/jpg,image/jpeg"  size="5000000"/>
                                    
                                    </div>
                                    <br/>
                                <div class="row">
                                    <div class="col-md-6 text-left">
                                        <button type="button" class="backBtn btn btn-primary col-md-8" id="previous_button_5">Previous</button>
                                    </div>
                                    <div class="col-md-6 text-right">
                                        <button type="submit" class="btn btn-primary">Submit Application</button> 
                                    </div>
                                </div>

                                <br/><br/>
                                
                                
                                  
                            </div>
                            </div>
                            <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>


                            <script>
                                document.addEventListener("DOMContentLoaded", function () {
                                    let regionSelect = document.getElementById("region");
                                    let districtSelect = document.getElementById("district");

                                    regionSelect.addEventListener("change", function () {
                                        let selectedRegion = this.value;

                                        // Loop through all district options
                                        let districtOptions = districtSelect.querySelectorAll("option");
                                        districtOptions.forEach(option => {
                                            if (option.value === "") {
                                                option.hidden = false; // Keep the default "Select a district"
                                            } else {
                                                let regionId = option.getAttribute("data-region");
                                                option.hidden = regionId !== selectedRegion;
                                            }
                                        });

                                        // Reset the district selection when region changes
                                        districtSelect.value = "";
                                    });
                                });
                            </script>

                            <script>
                                document.addEventListener("DOMContentLoaded", function () {
                                    let districtSelect = document.getElementById("district");
                                    let subcountySelect = document.getElementById("sub_county");

                                    districtSelect.addEventListener("change", function () {
                                        let selectedDistrict = this.value;

                                        let subcountyOptions = subcountySelect.querySelectorAll("option");
                                        subcountyOptions.forEach(option => {
                                            if (option.value === "") {
                                                option.hidden = false; // Keep the default "Select a sub-county"
                                            } else {
                                                let districtId = option.getAttribute("data-district");
                                                option.hidden = districtId !== selectedDistrict;
                                            }
                                        });

                                        // Reset the district selection when district changes
                                        subcountySelect.value = "";
                                    });
                                });
                            </script>

                            <script>
                                document.addEventListener("DOMContentLoaded", function () {
                                    let subcountySelect = document.getElementById("sub_county");
                                    let parishSelect = document.getElementById("parish");

                                    subcountySelect.addEventListener("change", function () {
                                        let selectedSubcounty = this.value;

                                        let parishOptions = parishSelect.querySelectorAll("option");
                                        parishOptions.forEach(option => {
                                            if (option.value === "") {
                                                option.hidden = false; // Keep the default "Select a parish"
                                            } else {
                                                let sub_countyId = option.getAttribute("data-sub_county");
                                                option.hidden = sub_countyId !== selectedSubcounty;
                                            }
                                        });

                                        // Reset the district selection when Sub county changes
                                        parishSelect.value = "";
                                    });
                                });
                            </script>

                            <script>
                                document.addEventListener("DOMContentLoaded", function () {
                                    let parishSelect = document.getElementById("parish");
                                    let villageSelect = document.getElementById("village");

                                    parishSelect.addEventListener("change", function () {
                                        let selectedParish = this.value;

                                        let villageOptions = villageSelect.querySelectorAll("option");
                                        villageOptions.forEach(option => {
                                            if (option.value === "") {
                                                option.hidden = false; // Keep the default "Select a parish"
                                            } else {
                                                let parishId = option.getAttribute("data-parish");
                                                option.hidden = parishId !== selectedParish;
                                            }
                                        });

                                        // Reset the district selection when Parish changes
                                        villageSelect.value = "";
                                    });
                                });
                            </script>

                            


                            

                            <script>
                                // Variables to store each section of the form
                                const formSections = document.querySelectorAll(".form"); // Collect all form sections
                                const nextButtons = document.querySelectorAll(".nextBtn"); // All 'Next' buttons
                                const backButtons = document.querySelectorAll(".backBtn"); // All 'Previous' buttons
                                let currentSection = 0;

                                // Show only the first section initially
                                function showSection(index) {
                                    formSections.forEach((section, i) => {
                                        section.style.display = i === index ? "block" : "none"; // Show the current section
                                    });
                                }

                                // Initialize form with the first section visible
                                showSection(currentSection);

                                // Event listener for each 'Next' button
                                nextButtons.forEach((nextButton, index) => {
                                    nextButton.addEventListener("click", () => {
                                        if (validateSection(formSections[index])) { // Call validation before moving forward
                                            currentSection++;
                                            showSection(currentSection);
                                        } else {
                                            alert("Please fill in all required fields.");
                                        }
                                    });
                                });

                                // Event listener for each 'Previous' button
                                backButtons.forEach((backButton, index) => {
                                    backButton.addEventListener("click", () => {
                                        currentSection--;
                                        showSection(currentSection);
                                    });
                                });


                                 // Function to validate only the required fields in the current section
                                function validateSection(section) {
                                    const requiredInputs = section.querySelectorAll("input[required], select[required]");
                                    let isValid = true;
                                    
                                    requiredInputs.forEach(input => {
                                        if (!input.value) { // Check for empty value
                                            isValid = false;
                                            input.classList.add("error"); // Optional: Add a CSS class to highlight errors
                                        } else {
                                            input.classList.remove("error");
                                        }
                                    });
                                    
                                    return isValid;
                                }

                                document.getElementById('passportPhotoInput').addEventListener('change', function() {
                                    const passportPhotoInput = this;
                                    if (passportPhotoInput.files.length > 0) {
                                        const fileSize = passportPhotoInput.files[0].size; // in bytes
                                        const maxSize = 5000000; // 5MB
                                        if (fileSize > maxSize) {
                                            alert('File size exceeds the limit of 1MB. Please choose a smaller file.');
                                            passportPhotoInput.value = ''; // Clear the file input
                                        }
                                    }
                                }); 
                            </script>

                            <script>
                                document.getElementById('addInstituteButton').addEventListener('click', function() {
                                    // Get the institute fields container
                                    const instituteFields = document.getElementById('instituteFields');

                                    // Create a new set of fields
                                    const newInstituteGroup = document.createElement('div');
                                    newInstituteGroup.classList.add('row', 'institute-group');

                                    newInstituteGroup.innerHTML = `
                                        <div class="form-group col-md-4">
                                            <label>Institute</label>
                                            <input type="text" name="name_institute[]" class="form-control"/>
                                        </div>
                                        <div class="form-group col-md-4">
                                            <label>Year</label>
                                            <input type="text" name="year_training[]" class="form-control"/>
                                        </div>
                                        <div class="form-group col-md-4">
                                            <label>Qualification</label>
                                            <input type="text" name="qualification[]" class="form-control"/>
                                        </div>
                                    `;

                                    // Append the new set of fields to the form
                                    instituteFields.appendChild(newInstituteGroup);
                                });
                            </script>


                            <script>
                                document.getElementById('addEmploymentButton').addEventListener('click', function() {
                                    // Get the employment fields container
                                    const employmentFields = document.getElementById('employmentFields');

                                    // Create a new set of fields
                                    const newEmploymentGroup = document.createElement('div');
                                    newEmploymentGroup.classList.add('row', 'employment-group');

                                    newEmploymentGroup.innerHTML = `
                                        <div class="form-group col-md-4">
                                            <label>Employer Name</label>
                                            <input type="text" name="employer_name[]" class="form-control"/>
                                        </div>
                                        <div class="form-group col-md-4">
                                            <label>Starting Year</label>
                                            <input type="text" name="starting_year[]" class="form-control"/>
                                        </div>
                                        <div class="form-group col-md-4">
                                            <label>Ending Year</label>
                                            <input type="text" name="ending_year[]" class="form-control"/>
                                        </div>
                                    `;

                                    // Append the new set of fields to the form
                                    employmentFields.appendChild(newEmploymentGroup);
                                });
                            </script>

                                     
                        </form>
                    </div>
                </div>            
            </div>       
        </t>
    
    </template>
    <record id="student_thanks" model="website.page">
        <field name="name">Thanks</field>
        <field name="type">qweb</field>
        <field name="url">/sendea/registration-success</field>
        <field name="website_published">True</field>
        <field name="key">sendea_online_course.student_thanks</field>
        <field name="arch" type="xml">
            <t t-call="portal.portal_layout">
                <div id="wrap">
                    <div class="container">
                        <h1>Thanks</h1>
                        <div class="row">
                            <div class="col-lg-8">
                                <div class="alert alert-success" role="status">
                                    Your Application has been submitted successfully
                                </div>
                                <div>
                                    <t t-esc="partner_name"/>
                                    <t t-esc="invoice_number"/>
                                    <t t-esc="total_amount"/>
                                </div>
                                <p>
                                    We'll get back to you shortly
                                </p>
                            </div>
                        </div>
                        <div class="row" id="o_recruitment_thank_cta">
                            <div class="col-lg-12 text-center mt32 mb32">
                                In the meantime,
                                <h3 class="mt8 mb32">Look around on our website:</h3>
                                <a role="button" href="/" class="btn btn-primary btn-lg">Continue To Our Website</a>
                            </div>
                        </div>
                    </div>
                </div>
            </t>
        </field>
    </record>


</odoo>